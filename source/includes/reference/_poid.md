# poid #

A request from Simplex to you, asking you to verify a KYC proof-of-identity document.

The request includes data entered by an end-user and images of a document in support. Simplex is asking that you verify that the data in the images indeed matches that entered by the end-user.

This request from Simplex results in you starting "KYC POID verification process", for which you also generate an identifier. Your response includes this identifier, together with the status of that verification process:

`"completed"` : you completed the verification process, and the outcome is included in this response.

`"pending"` : the verification process is underway, and the outcome is pending.

`"failed"` : there was an error starting the verification process.

In all cases, your response must include a verification process identifier which Simplex can use to query you about its status and outcome.

## Synopsis ##

API name: **`poid`**  
Direction: **Simplex &rarr; You**

## Parameters ##

> Example request:

```json
{
  // TODO
}
```

Name                      | Type                      |              | Description
------------------------- | ------------------------- | ------------ | -----------
                          |                           |              |
txn_id                    | Id                        | **required** |
                          |                           |              |
claimed_personal_details  |                           | **required** |
&emsp; first_name         | String                    | **required** |
&emsp; last_name          | String                    | **required** |
&emsp; gender             | String                    | **required** | One of { `"male"`, `"female"` }
&emsp; date_of_birth      | Date                      | **required** |
                          |                           |              |
claimed_address           | Address                   | **required** |
                          |                           |              |
claimed_document          |                           | **required** |
&emsp; type               | String                    | **required** | One of { `"id_card"`, `"passport"`, `"drivers_license"` }
&emsp; number             | String                    | **required** |
&emsp; expiration         | Date                      | **required** |
&emsp; issuing_country    | String                    | **required** | ISO 3166-1 ALPHA-2
                          |                           |              |
document_images           | List\<DocumentPageImage\> | **required** |

Type `DocumentPageImage` :

Name | Type   |              | Description
-----| ------ | ------------ | -----------
page | String | **required** | Which page of the document is this image. One of { `"front"`, `"back"` }.
url  | String | **required** | URL for image data. May be a data URI.

### dst_currency ###
#### (Currency, **required**)

The currency to convert to: this is the currency the end-user wishes to receive.

If `src_currency` represents a fiat currency then `dst_currency` will represent a crypto currency, and vise versa.

## Response ##

> An example response:

```json
{
  "poid_id": "poid:3209830",
  "status": "pending"
}
```

Name    | Type   |   |
------- | ------ | - |
poid_id | Id     | **requried**
status  | String | **required**
outcome | String | **required** if `status == "completed"`, missing otherwise

### poid_id ###
#### (String, **required**)

An opaque string generated by you and stored by Simplex.

You may use this identifier to notify Simplex of the status and outcome of the verification process once the status changes (e.g. moves from `"pending"` to `"completed"`), and Simplex may use this identifier to query you regarding the status and outcome of the verification process.

### status ###
#### (String, **required**)

One of { `"completed"`, `"pending"`, `"failed"` }.

### outcome ###
#### (String, **required** if `status == "completed"`, missing otherwise)

The outcome of the verification process.

`"success"`: all details match.

`"soft_fail"`: the verification process cannot proceed (e.g. image is blurry, country is not supported, etc.). This is not necessarily an indication of data mismatch.

`"hard_fail"`: mismatch between entered data and the images provided, or the images are not trustworthy.

## p/REST ##

If you supply a p/REST endpoint for this API, Simplex will use  
<span class="http-verb http-get">GET</span> `https://${YOUR_API_URL}/poid`

## MsgQueue ##

Alternatively, you may receive this request as a message of type `"poid"` in  
<span class="http-verb http-get">GET</span> `https://api.simplexcc.com/v1/msg`

You respond by  
<span class="http-verb http-post">POST</span> `https://api.simplexcc.com/v1/msg/:msg-id/response`

You will need to also acknowledge receipt of the message, by  
<span class="http-verb http-post">POST</span> `https://api.simplexcc.com/v1/msg/:msg-id/ack`

[modeline]: # ( vim: set ts=2 sw=2 expandtab wrap linebreak: )
