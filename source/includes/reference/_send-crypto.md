# send-crypto #

A request, from Simplex, for you to send cryptocurrency to a specified destination crypto address.

If you are the entity providing liquidity for a Simplex transaction, then after Simplex approves the transaction you will be asked to create a blockchain transaction that will result in the transfer of a specified amount of cryptocurrency to a specified destination crypto address.

In case of a refund, if you are the entity that received the cryptocurrency you will be asked to send it back (albeit to a possibly different crypto address from which it was sent).

This request from Simplex results in you creating an execution order, or an "xo", for which you generate an identifier. Your response includes an identifier for this execution order, together with its status:

`"completed"` : you fulfilled the execution order by creating a blockchain transaction.

`"pending"` : you haven't yet created the blockchain transaction, but will do so soon.

`"failed"` : there was an error creating the blockchain transaction.

In all cases, your response must include an execution order identifier which Simplex can use to query you about its status.

## Synopsis ##

API name: **`send-crypto`**  
Direction: **Simplex &rarr; You**

## Parameters ##

> Example:

```json
{
  "txn_id": "af492cb2-5b07-4318-8ece-be34f479e23b",
  "destination_crypto_address": "1GzW2M6L54DGMUUv2DTrdPTt8PX6ck5SYp",
  "crypto_currency": "BTC",
  "amount": 125000 // 0.125 BTC
}
```

Name                       | Type           |   |
-------------------------- | -------------- | - |
txn_id                     | Id             |
destination_crypto_address | CryptoAddress  |
crypto_currency            | CryptoCurrency |
amount                     | MoneyAmount    |

### txn_id ###
#### (Id, optional)

The identifier of the Simplex transaction involved.

If you are the entity that initiated the Simplex transaction then this `txn_id` is known to you and you can use it for tracking.

Otherwise, you can still use `txn_id` to correlate `send-crypto`'s with their corresponding `txn-event-notify`'s, as well as for auditing.

### destination_crypto_address ###
#### (CryptoAddress, optional)

The destination crypto address to which to send the cryptocurrency.

### crypto_currency ###
#### (CryptoCurrency, optional)

The crypto currency (the currency, not the amount) to send.

### amount ###
#### (MoneyAmount, optional)

How much cryptocurrency of type `crypto_currency` to send.

## Response ##

> An example response:

```json
{
  "xo_id": "xo:7791528",
  "status": "completed"
}
```

Your response includes an `xo_id`.

If you respond with a `"pending"` status, via either p/REST or MsgQueue, you will need to later notify Simplex when the status changes to either `"completed"` or `"failed"`. You do this using the `send-crypto-notify` API.

Alternatively, Simplex may poll you for the status, again via either p/REST or MsgQueue, using `send-crypto-get-status`.

Name   | Type   |   |
------ | ------ | - |
xo_id  | String | **required**
status | String | **required**

### xo_id ###
#### (String, **required**)

An opaque string generated by you and stored by Simplex.

You may use this identifier to notify Simplex of the status of the execution order once it changes (e.g. moves from `"pending"` to `"completed"`), and Simplex may use this identifier to query you regarding the status of the execution order.

### status ###
#### (String, **required**)

One of { `"completed"`, `"pending"`, `"failed"` }.

## p/REST ##

If you supply a p/REST endpoint for this API, Simplex will use  
<span class="http-verb http-post">POST</span> `https://${YOUR_API_URL}/send-crypto`

## MsgQueue ##

Alternatively, you may receive this request as a message of type `"send-crypto"` in  
<span class="http-verb http-get">GET</span> `https://api.simplexcc.com/v1/msg`

You respond by  
<span class="http-verb http-post">POST</span> `https://api.simplexcc.com/v1/msg/:msg-id/response`

You will need to also acknowledge receipt of the message, by  
<span class="http-verb http-post">POST</span> `https://api.simplexcc.com/v1/msg/:msg-id/ack`

[modeline]: # ( vim: set ts=2 sw=2 expandtab wrap linebreak: )
