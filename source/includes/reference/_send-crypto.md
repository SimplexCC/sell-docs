# send-crypto #

A request, from Simplex, for you to send cryptocurrency to a specified destination crypto address.

If you are the entity providing liquidity for a Simplex transaction, then after Simplex approves the transaction you will be asked to create a blockchain transaction that will result in the transfer of a specified amount of cryptocurrency to a specified destination crypto address.

In case of a refund, if you are the entity that received the cryptocurrency you will be asked to send it back (albeit to a possibly different crypto address from which it was sent).

This request from Simplex results in a you creating an execution order, or an "xo", for which you generate an identifier. Your response includes an identifier for this execution order, together with its status:

 * `"completed"` : you fulfilled the execution order by creating a blockchain transaction.
 * `"pending"` : you haven't yet created the blockchain transaction, but will do so soon.
 * `"failed"` : there was an error creating the blockchain transaction.

In all cases, your response must include an execution order identifier which Simplex can use to query you about its status.

## Synopsis ##

API name: **`send-crypto`**  
Direction: **Simplex &rarr; You**  
Transports: **p/REST, MsgQueue**

## Parameters ##

> Example:

```json
{
  "txn_id": "af492cb2-5b07-4318-8ece-be34f479e23b",
  "dst_crypto_addr": "1GzW2M6L54DGMUUv2DTrdPTt8PX6ck5SYp",
  "crypto_currency": "BTC",
  "amount": 125000 // 0.125 BTC
}
```

Name            | Type           |   |
--------------- | -------------- | - |
txn_id          | Id             |
dst_crypto_addr | CryptoAddr     |
crypto_currency | CryptoCurrency |
amount          | MoneyAmount    |

### txn_id ###
#### (Id, optional)

The identifier of the Simplex transaction involved.

If you the entity that initiated the Simplex transaction then this `txn_id` is known to you, and you can use it for your tracking.

Otherwise, if you did not initiate the Simplex transaction but are rather acting as the liquidity provider/receiver, you can use the `txn_id` to correlate `send-crypto`'s with their corresponding `txn-event-notify`'s, as well as for auditing purposes.

### dst_crypto_addr ###
#### (CryptoAddr, optional)

The destination crypto address to which to send the cryptocurrency.

### crypto_currency ###
#### (CryptoCurrency, optional)

The crypto currency (the currency, not the amount) to send.

### amount ###
#### (MoneyAmount, optional)

How much cryptocurrency of type `crypto_currency` to send.

## Response ##

> An example response:

```json
{
  "xo_id": "xo:7791528",
  "status": "completed"
}
```

Your response includes an `xo_id`, which Simplex will later use to query you regarding the status (in case you respond with a `"pending"` status).

Alternatively, you may notify Simplex (using the `xo-status` API) when the status changes from `"pending"` to either `"completed"` or `"failed"`.

Name   | Type
------ | ----
xo_id  | String
status | String

### xo_id ###
#### (String)

An opaque string generated by you and stored by Simplex.

You may use this identifier to notify Simplex of the status of the execution order once it changes (e.g. moves from `"pending"` to `"completed"`), and Simplex may use this identifier to query you regarding the status of the execution order.

### status ###
#### (String)

One of { `"completed"`, `"pending"`, `"failed"` }.

## Transports ##

### p/REST ###

<span class="http-verb http-post">POST</span>`https://${YOUR_API_URL}/send-crypto`

### MsgQueue ###

You receive this request as a message of type `"send-crypto"` in  
<span class="http-verb http-get">GET</span>`https://api.simplexcc.com/v1/q/msg`

You respond by  
<span class="http-verb http-post">POST</span>`https://api.simplexcc.com/v1/q/msg/:msg-id/response`

You need to also acknowledge receipt of the message, by  
<span class="http-verb http-post">POST</span>`https://api.simplexcc.com/v1/q/msg/:msg-id/ack`

**If you respond with a `"pending"` status** you need to provide the p/REST endpoint `xo-status`, or alternatively send a later `"xo-status"` message by  
<span class="http-verb http-post">POST</span>`https://api.simplexcc.com/v1/q/xo-status`

[modeline]: # ( vim: set ts=2 sw=2 expandtab wrap linebreak: )
